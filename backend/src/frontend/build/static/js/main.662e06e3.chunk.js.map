{"version":3,"sources":["components/ChatPage/InputBar.js","components/ChatPage/Message.js","components/ChatPage/ChatWindow.js","components/ChatPage/User.js","components/ChatPage/CurrentUsers.js","components/ChatPage/ChatPage.js","components/SignUpPage/ErrorAlert.js","components/SignUpPage/SignupForm.js","App.js","index.js"],"names":["InputBar","sendMessage","useState","Message","setMessage","onSubmit","message","className","e","preventDefault","id","autoComplete","type","placeholder","onChange","target","value","onClick","sender","text","createdAt","moment","format","ChatWindow","room","newMessages","olderMessages","setOlderMessages","btmDiv","useRef","useEffect","a","axios","get","res","data","current","scrollIntoView","behavior","block","map","key","_id","ref","User","username","CurrentUsers","presentUsers","user","ID","ChatPage","props","this","state","socket","emit","bind","io","on","setState","React","Component","ErrorAlert","errorMessage","setShowError","setTimeout","SignupForm","setRoom","setUsername","setAuth","usernameText","setUsernameText","passwordText","setPasswordText","roomText","setRoomText","showError","setErrorMessage","length","post","password","status","name","required","App","isAuthenticated","setAuthenticated","render","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.662e06e3.chunk.js","sourcesContent":["import React, { useState } from \"react\";\r\n\r\nconst InputBar = ({ sendMessage }) => {\r\n  const [Message, setMessage] = useState(\"\");\r\n\r\n  const onSubmit = () => {\r\n    sendMessage({ message: Message });\r\n    setMessage(\"\");\r\n  };\r\n\r\n  const onChange = e => {\r\n    setMessage(e.target.value);\r\n  };\r\n\r\n  const handleFormSubmit = e => {\r\n    e.preventDefault();\r\n    onSubmit();\r\n  };\r\n\r\n  return (\r\n    <div className=\"form-group\">\r\n      <form onSubmit={handleFormSubmit} id=\"inputBar\">\r\n        <input\r\n          autoComplete=\"off\"\r\n          type=\"text\"\r\n          className=\"form-control\"\r\n          placeholder=\"Send message\"\r\n          id=\"inputDefault\"\r\n          onChange={onChange}\r\n          value={Message}\r\n        />\r\n        <button\r\n          type=\"button\"\r\n          className=\"btn btn-primary\"\r\n          onClick={onSubmit}\r\n          id=\"submitButton\"\r\n        >\r\n          Send\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default InputBar;\r\n","import React from \"react\";\r\nimport moment from \"moment\";\r\n\r\nconst Message = ({ sender, text, createdAt }) => {\r\n  return (\r\n    <div className=\"card\">\r\n      <div className=\"card-body\">\r\n        <h6 className=\"card-subtitle mb-2 text-muted\">\r\n          {sender}, {moment(createdAt).format(\"Do, h:mm a\")}\r\n        </h6>\r\n        <p className=\"card-text\">{text}</p>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Message;\r\n","import React, { useState, useEffect, useRef } from \"react\";\r\nimport InputBar from \"./InputBar\";\r\nimport Message from \"./Message\";\r\nimport axios from \"axios\";\r\n\r\nconst ChatWindow = ({ room, newMessages, sendMessage }) => {\r\n  const [olderMessages, setOlderMessages] = useState([]);\r\n  const btmDiv = useRef(null);\r\n\r\n  useEffect(() => {\r\n    (async function loadEarlierMessages() {\r\n      const res = await axios.get(\r\n        `https://chat-app-sean-fahy.herokuapp.com/messages/${room}`\r\n      );\r\n      setOlderMessages(res.data);\r\n    })();\r\n  }, [room]);\r\n\r\n  useEffect(() => {\r\n    btmDiv.current.scrollIntoView({\r\n      behavior: \"smooth\",\r\n      block: \"start\"\r\n    });\r\n  }, [newMessages]);\r\n\r\n  return (\r\n    <div id=\"chat-window\">\r\n      <div id=\"messages\">\r\n        {olderMessages.map(message => (\r\n          <Message\r\n            sender={message.sender}\r\n            key={message._id}\r\n            text={message.message}\r\n            createdAt={message.createdAt}\r\n          />\r\n        ))}\r\n        {newMessages.map(message => (\r\n          <Message\r\n            sender={message.sender}\r\n            key={message._id}\r\n            text={message.message}\r\n            createdAt={message.createdAt}\r\n          />\r\n        ))}\r\n        <div ref={btmDiv}></div>\r\n      </div>\r\n      <InputBar sendMessage={sendMessage} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ChatWindow;\r\n","import React from \"react\";\r\n\r\nconst User = ({ username }) => {\r\n  return <h4>{username}</h4>;\r\n};\r\n\r\nexport default User;\r\n","import React from \"react\";\r\nimport User from \"./User\";\r\n\r\nconst CurrentUsers = ({ room, presentUsers }) => {\r\n  return (\r\n    <div id=\"currentUsers\">\r\n      <h1>Room: {room}</h1>\r\n      <div id=\"seperatingDiv\"></div>\r\n      <h2>Active users:</h2>\r\n      <div id=\"presentUsers\">\r\n        {presentUsers.map(user => (\r\n          <User username={user.username} key={user.ID} />\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CurrentUsers;\r\n","import React from \"react\";\r\nimport io from \"socket.io-client\";\r\n\r\nimport ChatWindow from \"./ChatWindow\";\r\nimport CurrentUsers from \"./CurrentUsers\";\r\n\r\nexport default class ChatPage extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.sendMessage = this.sendMessage.bind(this);\r\n    //chat-app-sean-fahy.herokuapp.com\r\n    this.state = {\r\n      //      endpoint: \"http://localhost:3001/\",\r\n      //`https://chat-app-sean-fahy.herokuapp.com`\r\n      socket: io(),\r\n      newMessages: [],\r\n      presentUsers: []\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.state.socket.emit(\"join\", {\r\n      room: this.props.room,\r\n      username: this.props.username\r\n    });\r\n\r\n    this.state.socket.on(\"message\", message => {\r\n      this.setState({\r\n        ...this.state,\r\n        newMessages: [...this.state.newMessages, message]\r\n      });\r\n    });\r\n\r\n    this.state.socket.on(\"presentUsers\", presentUsers => {\r\n      this.setState({\r\n        ...this.state,\r\n        presentUsers\r\n      });\r\n    });\r\n  }\r\n\r\n  sendMessage = function sendMessage(message) {\r\n    message.room = this.props.room;\r\n    message.sender = this.props.username;\r\n    this.state.socket.emit(\"sendMessage\", message);\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div id=\"chatPage\">\r\n        <CurrentUsers\r\n          room={this.props.room}\r\n          presentUsers={this.state.presentUsers}\r\n        />\r\n        <ChatWindow\r\n          room={this.props.room}\r\n          username={this.props.username}\r\n          newMessages={this.state.newMessages}\r\n          sendMessage={this.sendMessage}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { useEffect } from \"react\";\r\n\r\nconst ErrorAlert = ({ errorMessage, setShowError }) => {\r\n  useEffect(() => {\r\n    setTimeout(() => {\r\n      setShowError(false);\r\n    }, 4000);\r\n  }, [setShowError]);\r\n\r\n  return (\r\n    <div className=\"alert alert-dismissible alert-danger\">\r\n      <strong>Error!</strong> <p>{errorMessage}</p>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ErrorAlert;\r\n","import React, { useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport ErrorAlert from \"./ErrorAlert\";\r\n\r\nconst SignupForm = ({ setRoom, setUsername, setAuth }) => {\r\n  const [usernameText, setUsernameText] = useState(\"\");\r\n  const [passwordText, setPasswordText] = useState(\"\");\r\n  const [roomText, setRoomText] = useState(\"\");\r\n\r\n  const [showError, setShowError] = useState(false);\r\n  const [errorMessage, setErrorMessage] = useState(\"\");\r\n\r\n  async function submit() {\r\n    if (!usernameText || !passwordText || !roomText) {\r\n      setErrorMessage(\"Ensure a username, password and room are provided\");\r\n      setShowError(true);\r\n      return;\r\n    }\r\n\r\n    if (passwordText.length < 7) {\r\n      setErrorMessage(\"Password must have at least 7 characters\");\r\n      setShowError(true);\r\n      return;\r\n    }\r\n\r\n    setRoom(roomText);\r\n    setUsername(usernameText);\r\n\r\n    try {\r\n      const res = await axios.post(\r\n        \"https://chat-app-sean-fahy.herokuapp.com/users\",\r\n        {\r\n          username: usernameText,\r\n          password: passwordText\r\n        }\r\n      );\r\n\r\n      if (res.status === 201 || res.status === 202) {\r\n        setAuth(true);\r\n      } else if (res.status === 200) {\r\n        setErrorMessage(\"Incorrect password\");\r\n        setShowError(true);\r\n      }\r\n    } catch (res) {}\r\n  }\r\n\r\n  function onUsernameChange(e) {\r\n    setUsernameText(e.target.value);\r\n  }\r\n\r\n  function onPasswordChange(e) {\r\n    setPasswordText(e.target.value);\r\n  }\r\n\r\n  function onRoomChange(e) {\r\n    setRoomText(e.target.value);\r\n  }\r\n\r\n  const handleFormSubmit = e => {\r\n    e.preventDefault();\r\n  };\r\n\r\n  return (\r\n    <div id=\"formWindow\">\r\n      <div className=\"card signupform\">\r\n        <div className=\"card-body\">\r\n          <h4 className=\"card-title\">Sign Up / Login & Join room</h4>\r\n          <form onSubmit={handleFormSubmit}>\r\n            <label>Username</label>\r\n            <input\r\n              autoComplete=\"off\"\r\n              onChange={onUsernameChange}\r\n              type=\"text\"\r\n              className=\"form-control\"\r\n              name=\"username\"\r\n              placeholder=\"Username\"\r\n              id=\"UsernameInput\"\r\n              required\r\n            />\r\n            <label>Password</label>\r\n            <input\r\n              autoComplete=\"off\"\r\n              onChange={onPasswordChange}\r\n              type=\"password\"\r\n              className=\"form-control\"\r\n              placeholder=\"Password\"\r\n              required\r\n            />\r\n            <label>Room</label>\r\n            <input\r\n              autoComplete=\"off\"\r\n              onChange={onRoomChange}\r\n              type=\"text\"\r\n              className=\"form-control\"\r\n              name=\"room\"\r\n              placeholder=\"Room\"\r\n              required\r\n            />\r\n            <button\r\n              className=\"btn btn-primary\"\r\n              id=\"signup-button\"\r\n              onClick={submit}\r\n            >\r\n              Join\r\n            </button>\r\n          </form>\r\n        </div>\r\n        {showError && (\r\n          <ErrorAlert errorMessage={errorMessage} setShowError={setShowError} />\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SignupForm;\r\n","import React, { StrictMode, useState } from \"react\";\nimport ChatPage from \"./components/ChatPage/ChatPage\";\nimport SignupForm from \"./components/SignUpPage/SignupForm\";\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\n\nfunction App() {\n  const [isAuthenticated, setAuthenticated] = useState(false);\n  const [username, setUsername] = useState(null);\n  const [room, setRoom] = useState(null);\n\n  return (\n    <StrictMode>\n      <Router>\n        <Switch>\n          {isAuthenticated && (\n            <Route\n              render={() => <ChatPage room={room} username={username} />}\n            />\n          )}\n          <Route\n            render={() => (\n              <SignupForm\n                setAuth={setAuthenticated}\n                setRoom={setRoom}\n                setUsername={setUsername}\n              />\n            )}\n          />\n        </Switch>\n      </Router>\n    </StrictMode>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}